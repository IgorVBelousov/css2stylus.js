(function(e){"object"==typeof global&&global&&global.global===global&&(e=global);var t={Converter:function(e){return this.css=e||"",this.output="",this}};t.Converter.prototype=t.prototype={options:{indent:2,cssSyntax:!1,openingBracket:"",closingBracket:"",semicolon:"",eol:""},processCss:function(e){return this.css?(e=e||{},e.indent&&(this.options.indent=e.indent),!0===e.cssSyntax&&(this.options.openingBracket="{",this.options.closingBracket="}",this.options.semicolon=":",this.options.eol=";"),this.indentation="tab"===this.options.indent?"	":this.repeat(" ",this.options.indent),this.parse(),this):this.css},parse:function(){var e={children:{}},t=this;this.css.replace(/\/\*[\s\S]*?\*\//gm,"").replace(/([^{]+)\{([^}]+)\}/g,function(n,r,i){var s,o=e,u,r=t.trim(r);if(/,/.test(r))o=t.addRule(o,r);else{r=r.replace(/\s*([>\+~])\s*/g," &$1").replace(/(\w)([:\.])/g,"$1 &$2"),u=r.split(/[\s]+/),n=0;for(r=u.length;n<r;n++)s=u[n].replace(/&(.)/g,"& $1 ").replace(/& ([:\.]) /g,"&$1"),o=t.addRule(o,s)}i.replace(/([^:;]+):([^;]+)/g,function(e,n,r){o.declarations.push({property:t.trim(n),value:t.trim(r)})})}),this.output=this.generateOutput(e)},addRule:function(e,t){return e.children[t]=e.children[t]||{children:{},declarations:[]}},depth:0,generateOutput:function(e){var t="",n,r,i,s,o,u=this.options.openingBracket?" "+this.options.openingBracket:"";for(n in e.children)if(e.children.hasOwnProperty(n)){t+=this.getIndent()+n+u+"\n",this.depth++,s=e.children[n].declarations,r=0;for(i=s.length;r<i;r++)o=s[r],t+=this.getIndent()+o.property+this.options.semicolon+" "+o.value+this.options.eol+"\n";t+=this.generateOutput(e.children[n]),this.depth--,t+=this.getIndent()+this.options.closingBracket+"\n"+(0===this.depth?"$n":"")}return t=t.replace(/^\s*$[\n\r]{1,}/gm,"").replace(/\$n/g,"\n")},getIndent:function(){return this.repeat(this.indentation,this.depth)},getStylus:function(){return this.output},trim:function(e){return e.replace(/\t+/," ").replace(/^\s+|\s+$/g,"")},repeat:function(t,n){return n=e.parseInt(n,10),Array(n+1).join(t)}},e.Css2Stylus=t,"object"==typeof module&&module&&module.exports===exports?module.exports=t:"function"==typeof e.define&&e.define.amd&&e.define("css2stylus",[],function(){return e.Css2Stylus})}).call(this,this),$(function(){var e=$("#input"),t=$("#output"),n=function(n){var r=e.val();if(!r)return;var i=new Css2Stylus.Converter(r);i.processCss(n),t.val(i.getStylus())};$("#input").keyup(n),$("#selectall").click(function(){t.select()}),$('#main input[type="radio"]').change(function(){var e={indent:$(this).val()};n(e)}),$.get("js/demo.css",function(t){$("#loadsample").click(function(){e.val(t),n()})})});