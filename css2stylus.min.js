/*! css2stylus | http://css2stylus.com | https://github.com/dciccale/css2stylus.js/blob/master/LICENSE.txt */
(function(d){"object"===typeof global&&(global&&global.global===global)&&(d=global);var i={Converter:function(a){this.css=a||"";this.output="";return this}};i.Converter.prototype=i.prototype={options:{indent:2,cssSyntax:!1,openingBracket:"",closingBracket:"",semicolon:"",eol:""},processCss:function(a){if(!this.css)return this.css;a=a||{};a.indent&&(this.options.indent=a.indent);!0===a.cssSyntax&&(this.options.openingBracket="{",this.options.closingBracket="}",this.options.semicolon=":",this.options.eol=";");this.indentation="tab"===this.options.indent?"\t":this.repeat(" ",this.options.indent);this.parse();return this},parse:function(){var a={children:{}},b=this;this.css.replace(/\/\*[\s\S]*?\*\//gm,"").replace(/([^{]+)\{([^}]+)\}/g,function(e,c,d){var g,f=a,h,c=b.trim(c);if(/,/.test(c))f=b.addRule(f,c);else{c=c.replace(/\s*([>\+~])\s*/g," &$1").replace(/(\w)([:\.])/g,"$1 &$2");h=c.split(/[\s]+/);e=0;for(c=h.length;e<c;e++)g=h[e].replace(/&(.)/g,"& $1 ").replace(/& ([:\.]) /g,"&$1"),f=b.addRule(f,g)}d.replace(/([^:;]+):([^;]+)/g,function(a,c,e){f.declarations.push({property:b.trim(c),value:b.trim(e)})})});this.output=this.generateOutput(a)},addRule:function(a,b){return a.children[b]=a.children[b]||{children:{},declarations:[]}},depth:0,generateOutput:function(a){var b="",e,c,d,g,f,h=this.options.openingBracket?" "+this.options.openingBracket:"";for(e in a.children)if(a.children.hasOwnProperty(e)){b+=this.getIndent()+e+h+"\n";this.depth++;g=a.children[e].declarations;c=0;for(d=g.length;c<d;c++)f=g[c],b+=this.getIndent()+f.property+this.options.semicolon+" "+f.value+this.options.eol+"\n";b+=this.generateOutput(a.children[e]);this.depth--;b+=this.getIndent()+this.options.closingBracket+"\n"+(0===this.depth?"$n":"")}return b=b.replace(/^\s*$[\n\r]{1,}/gm,"").replace(/\$n/g,"\n")},getIndent:function(){return this.repeat(this.indentation,this.depth)},getStylus:function(){return this.output},trim:function(a){return a.replace(/\t+/," ").replace(/^\s+|\s+$/g,"")},repeat:function(a,b){b=d.parseInt(b,10);return Array(b+1).join(a)}};d.Css2Stylus=i;"object"===typeof module&&module&&module.exports===exports?module.exports=i:"function"===typeof d.define&&d.define.amd&&d.define("css2stylus",[],function(){return d.Css2Stylus})}).call(this,this);